<div class="header">
  <div class="info">
    <div class="playlist-selector">
      @if (platform !== 'local') {
        <app-playlist-selector
          [platform]="platform"
          [youtubePlaylists]="youtubePlaylists"
          [spotifyPlaylists]="spotifyPlaylists"
          [youtubeLoading]="youtubeLoading"
          [spotifyLoading]="spotifyLoading"
          (playlistChanged)="onPlaylistChanged($event)">
        </app-playlist-selector>
      }
      <button
        type="button"
        class="shuffle-btn"
        (click)="onShuffleClick()"
        [title]="platform === 'omniplay' ? 'Reshuffle combined order' : 'Reshuffle playlist'">
        <span class="text">Shuffle</span>
      </button>
      @if (platform === 'local') {
        <select
          class="playlist-dropdown local-playlist-dropdown"
          [value]="activeLocalPlaylistId"
          (change)="onLocalPlaylistChange($event)"
          aria-label="Select local playlist">
          <option [value]="LIBRARY_VIEW">All Tracks</option>
          @for (pl of localPlaylists; track pl.id) {
            <option [value]="pl.id">{{ pl.name }}</option>
          }
        </select>
        <button
          type="button"
          class="shuffle-btn manage-library-btn"
          title="Manage your local library"
          (click)="navigateToLibrary()">
          <span class="text">Manage</span>
        </button>
        <span class="queue-label" aria-live="polite">{{ activeQueueLabel }}</span>
      }
    </div>
  </div>
</div>
