<!-- Player Controls (Bottom) -->
<div class="controls">
  <div class="playback">
    <!-- Music Note Button (Current Track Indicator) -->
    <div class="thumbnail"></div>

    <!-- Previous Button -->
    <button class="btn-control" (click)="prev()" aria-label="Previous Song">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="19 20 9 12 19 4 19 20"></polygon>
        <line x1="5" y1="19" x2="5" y2="5"></line>
      </svg>
    </button>

    <!-- Play/Pause Button -->
    <button
      class="btn-control play-pause"
      (click)="toggle()"
      [attr.aria-label]="c.isPlaying() ? 'Pause' : 'Play'">
      @if (c.isPlaying()) {
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="6" y="4" width="4" height="16"></rect>
          <rect x="14" y="4" width="4" height="16"></rect>
        </svg>
      } @else {
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="5 3 19 12 5 21 5 3"></polygon>
        </svg>
      }
    </button>

    <!-- Next Button -->
    <button class="btn-control" (click)="next()" aria-label="Next Song">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="5 4 15 12 5 20 5 4"></polygon>
        <line x1="19" y1="5" x2="19" y2="19"></line>
      </svg>
    </button>

    <!-- Volume (grouped with transport controls) -->
    <div class="volume">
      <button class="btn-control" (click)="toggleMute()" [attr.aria-label]="c.volume() === 0 ? 'Unmute' : 'Mute'">
        @if (c.volume() === 0) {
          <!-- Volume off icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <line x1="23" y1="9" x2="17" y2="15"></line>
            <line x1="17" y1="9" x2="23" y2="15"></line>
          </svg>
        } @else {
          <!-- Volume icon -->
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
            <path d="M15 9a3 3 0 0 1 0 6"/>
            <path d="M19 7a7 7 0 0 1 0 10"/>
          </svg>
        }
      </button>
      <div class="volbar" (click)="onVolumeBarClick($event)" aria-label="Volume" role="slider" [attr.aria-valuemin]="0" [attr.aria-valuemax]="100" [attr.aria-valuenow]="Math.round(c.volume()*100)">
        <div class="fill" [style.width.%]="c.volume() * 100"></div>
      </div>
    </div>
  </div>

  <div class="progress">
    <div class="bar" (click)="onProgressBarClick($event)" style="cursor: pointer;">
      <div
        class="fill"
        [style.width.%]="(c.duration() ? (c.current() / c.duration()) * 100 : 0)">
      </div>
    </div>
  </div>


  <div class="time">
    {{ c.currentTimeFmt() }} / {{ c.durationFmt() }}
  </div>
</div>
